<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/bootstrap-icons.css" />
    <link rel="stylesheet" href="./css/bootstrap.css" />
    <title>Chat Palace</title>
  </head>
  <style>
    li {
      padding: 10px 20px;
    }
  </style>
  <body onload="loader()">
    <div class="container px-4 justify-content-between d-flex">
      <div class="text-start h6 bg-primary py-2 px-3 rounded-4 text-white" id="namer">
      </div>
      <div class="d-inline">

        <button onclick="logout()" class=" btn btn-danger rounded-4 py-1 px-3">
          Logout
        </button>
      </div>
      </div>
    <div class="offcanvas font-monospace top-0 w-50 fade" id="people">
      <div class="offcanvas-header bg-primary rounded-bottom-5">
        <div class="h3 text-white">Peoples</div>
      </div>
      <div class="offcanvas-body">
        <ul class="list-unstyled h5 text-center" id="peoples">
          <li class="border rounded-4 py-2">Daniel</li>
        </ul>
      </div>
    </div>
    <div
      class="shadow container font-monospace rounded border-dark pb-4 border"
    >
      <header
        class="container rounded-5 bg-primary text-white py-3 h5 text-center"
      >
        <div class="row">
          <div class="col-1 mx-auto">
            <button
              class="btn navbar navbar-dark"
              data-bs-target="#people"
              data-bs-toggle="offcanvas"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
          </div>

          <div class="col align-content-center">Welcome to Chat Palace</div>
        </div>
      </header>
      <main
        class="container-fluid overflow-auto"
        style="height: 80vh"
        id="chatbox"
      >
        <ul
          class="m-4 flex-column list-unstyled d-flex gap-3"
          id="textbox"
        ></ul>
      </main>
      <footer class="container text-center">
        <form class="form" action=`/chat.html/${windows.location.search}`>
          <div class="row">
            <div class="col-8">
              <input
                
                id="messagebox"
                type="text"
                placeholder="Message"
                class="form-control"
                required
              />
            </div>
            <div class="col">
              <button
                type="submit"
                id="submitbtn"
                class="rounded-5 btn bg-primary text-white d-none"
              >
                Send
              </button>
              <button id="locator" class="rounded-5 btn bg-primary text-white">
                Locate
              </button>
            </div>
          </div>
        </form>
      </footer>
    </div>

    <!-- 

    <form>
      <label for="messager">Enter the message : </label>
      <input type="text" title="message" name="message" id="messagebox" />
      <button type="submit" id="submitbtn" title="submit">Send</button>
      <button title="location" id="locator" type="button">Send Location</button>
    </form> -->
    <script src="/socket.io/socket.io.js"></script>
    <script>
      async function logout() {
        localStorage.setItem("email" , "")
        const res = await fetch("/logout", {
          method: "GET",
          headers: { "Content-Type": "application/json" },
        });
        window.location.href = "/login.html";
      }
    if (!localStorage.getItem("email")) window.location.href = "/login.html";
      document.getElementById("namer").textContent = "Welcome " + localStorage.getItem("email")
    </script>
    <script src="js/chat.js"></script>
    <script src="./js/bootstrap.bundle.js"></script>
  </body>
</html>
